# Changelog

All notable changes to this package will be documented in this file.

The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

## [1.0.0] - 2025-01-XX

### Added

- Introduced cumulative `total_ad_value` tracking for ad events. The SDK now maintains a persistent, device-local sum of all ad values (revenue) generated by the user.
- Every ad event now automatically includes a `total_ad_value` field, representing the total value of all ads viewed by the user since app install.
- Introduced cumulative `total_purchase_value` tracking for purchase events. The SDK now maintains a persistent, device-local sum of all purchase values (revenue) generated by the user.
- Every purchase event now automatically includes a `total_purchase_value` field, representing the total value of all purchases made by the user since app install.
- Added optional `tr_id` (transaction ID) field to purchase events for better transaction tracking and deduplication.
- The `tr_id` field is now available in `sendCustomPurchaseEvent` method as an optional parameter.
- The cumulative values are stored using localStorage and persist across browser sessions and device restarts.
- Updated `sendCustomAdEvent` API to automatically update and include `total_ad_value` in event payloads.
- Updated `sendCustomPurchaseEvent` API to automatically update and include `total_purchase_value` in event payloads (only increments when status is "completed" or "success").
- Added `getTotalAdValue()` function to retrieve the current cumulative ad value for the user.
- Added `getTotalPurchaseValue()` function to retrieve the current cumulative purchase value for the user.
- Updated TypeScript type definitions to include `total_ad_value` in `CustomAdEvent` interface, `total_purchase_value` in `CustomPurchaseEvent` interface, and optional `tr_id` field.
- Updated documentation and usage examples to reflect the new tracking functionality and event data structure.

### Changed

- `sendCustomAdEvent` now automatically tracks and includes cumulative ad value in the event payload.
- `sendCustomPurchaseEvent` now automatically tracks and includes cumulative purchase value in the event payload (only for completed/successful purchases).

## [0.9.9] - Previous Release

### Features

- Initial release with core SDK functionality
- Capacitor compatibility for cross-platform mobile development
- Custom event tracking (purchase, ad, and generic events)
- Device metrics collection
- Retention tracking
- Creative token management
